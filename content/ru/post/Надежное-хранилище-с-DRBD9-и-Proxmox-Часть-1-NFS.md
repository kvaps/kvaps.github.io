---
title: 'Надежное хранилище с DRBD9 и Proxmox (Часть 1: NFS)'
date: 2018-08-19 11:52:00
link: https://habr.com/post/417473/
---

![image](https://go.ahead.it/wp-content/uploads/2017/05/drbd.jpg)

Наверное каждый, кто хоть раз озадачивался поиском высокопроизводительного **software-defiined хранилища** рано или поздно слышал про **DRBD**, а может даже и имел дело с ним.

Правда на пике популярности **Ceph** и **GlusterFS**, которые работают в принципе неплохо, а главное сразу и из коробки, все просто немного подзабыли про него. Тем более что предыдущая версия не поддерживала репликацию более чем на два узла, и из-за чего часто встречались проблемы со **split-brain**, что явно не добавило ему популярности.

Решение и правда не новое, но вполне конкурентоспособное. При относительно небольших затратах на CPU и RAM, **DRBD** предоставляет реально быструю и безопасную синхронизацию на уровне **блочного устройства**. За все это время LINBIT - разработчики DRBD не стоят на месте и постоянно дорабатывают его. Начиная с версии **DRBD9** перестает быть просто сетевым зеркалом и становится чем-то бОльшим.

Во первых, идея создания одного **распределенного блочного устройства** для нескольких серверов отошла на задний план, и теперь LINBIT старается предоставить инструменты оркестрации и управления множеством drbd-устройств в кластере, которые создаются поверх **LVM** и **ZFS-разделов**.

Например DRBD9 поддерживает до 32 реплик, RDMA, diskless-ноды, а новые инструменты оркестрации позволяют использовать снапшоты, online-миграцию и много чего другого.

Несмотря на то что **DRBD9** имеет инструменты интеграции с **Proxmox**, **Kubernetes**, **OpenStack** и **OpenNebula**, на данный момент они находится в некотором переходном режиме, когда новые инструменты еще не везде поддерживаются, а старые уже очень скоро будут объявлены как *deprecated*. Речь идет о **DRBDmanage** и **Linstor**.

Я воспользуюсь этим моментом что бы не сильно вдаваться в подробности каждого из них, но более подробно рассмотреть настройку и принципы работы с самим **DRBD9**.

<!--more-->
